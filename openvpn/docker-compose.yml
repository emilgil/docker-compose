version: '2'
services:
  openvpn:
    cap_add:
     - NET_ADMIN
    image: kylemanna/openvpn
    container_name: openvpn
    ports:
     - "1194:1194/udp"
    environment:
     - 'management 0.0.0.0 5555'
    restart: always
    volumes:
     - /opt/openvpn:/etc/openvpn
    networks:
      pihole_static_network:
        ipv4_address: 172.18.0.5

  monitor:
    image: ruimarinho/openvpn-monitor
    container_name: ovpnmonitor
    ports:
      - "8084:80"
    restart: always
    depends_on:
      - openvpn
    env_file: /opt/openvpn/monitor.env
    networks:
      pihole_static_network:
        ipv4_address: 172.18.0.6

networks:
  pihole_static_network:
external: true
